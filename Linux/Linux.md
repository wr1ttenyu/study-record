# Linux

## 1.Linux的目录结构

Linux是树状的目录结构，只有一个根目录'/'。

记住一句经典的话 :

#####  在Linux世界里，一切皆文件。

### 1.1 Linux的具体目录结构 

`/bin [重点] (/usr/bin 、 /usr/local/bin)`                                                                                                             • 是Binary的缩写, 这个目录存放着最经常使用的命令

`/sbin (/usr/sbin 、 /usr/local/sbin)`                                                                                                                                   • s就是Super User的意思，这里存放的是系统管理员使用的系统管理程序 

` /home [重点]`
• 存放普通用户的主目录，在Linux中每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的。

 `/root [重点]`
• 该目录为系统管理员，也称作超级权限者的用户主目录。 

`/lib`
• 系统开机所需要最基本的动态连接共享库，其作用类似于Windows里的DLL文件。几乎所有的应用程序都需要用到这些共享库。

`/lost+found`
• 这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件。

`/etc [重点]`
• 所有的系统管理所需要的配置文件和子目录 my.conf

`/usr [重点]`
• 这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似与windows下的program files目录。 

`/proc`
• 这个目录是一个虚拟的目录，它是系统内存的映射，访问这个目录来获取系统信息。

`/boot [重点]`
• 存放的是启动Linux时使用的一些核心文件，包括一些连接文件以及镜像文件

`/srv`
• service缩写，该目录存放一些服务启动之后需要提取的数据。

`/sys`
• 这是linux2.6内核的一个很大的变化。该目录下安装了2.6内核中新出现的一个文件系统

`/tmp`
• 这个目录是用来存放一些临时文件的。 

`/dev`
• 类似于windows的设备管理器，把所有的硬件用文件的形式存储。

`/media [重点]`
• linux系统会自动识别一些设备，例如U盘、光驱等等，当识别后， linux会把识别的设备挂载到这个目录下。

`/mnt [重点]`
• 系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将外部的存储挂载在/mnt/上，然后进入该目录就可以查看里的内容了。

`/selinux [security-enhanced linux]`
• SELinux是一种安全子系统,它能控制程序只能访问特定文件。

`/var [重点]`
• 这个目录中存放着在不断扩充着的东西，习惯将经常被修改的目录放在这个目录下。包括各种日志文件。

`/opt`
• 这是给主机额外安装软件所摆放的目录。如安装ORACLE数据库就可放到该目录下。默认为空。

`/usr/local [重点]`
• 这是另一个给主机额外安装软件所安装的目录。一般是通过编译源码方式安装的程序。

## 2. vi 和 vim

所有的 Linux 系统都会内建 vi 文本编辑器。
Vim 具有程序编辑的能力，可以看做是Vi的增强版本，可以主动的以字体颜色辨别
语法的正确性，方便程序设计。代码补完、编译及错误跳转等方便编程的功能特别
丰富，在程序员中被广泛使用 。

###2.1 vi和vim常用的三种模式

- 正常模式:

  以 vim 打开一个档案就直接进入一般模式了(这是默认的模式)。在这个模式中， 你可以使用『上下左右』 按键来移动光标，你可以使用『删除字符』 或『删除整行』 来处理档案内容，也可以使用『复制、贴上』 来处理你的文件数据。

- 插入模式:

  按下i, I, o, O, a, A, r, R等任何一个字母之后才会进入编辑模式, 一般来说按i即可.

- 命令行模式

  在这个模式当中， 可以提供你相关指令，完成读取、存盘、替换、离开 vim 、显示行号等的动作则是在此模式中达成的！ 

- vi和vim的模式切换


![vi和vim的模式切换](img\vi和vim的模式切换.png)

- vi和vim有很多快捷键，上网百度即可

  小练习：

  1) 拷贝当前行 yy , 拷贝当前行向下的5行 5yy，并粘贴。
  2) 删除当前行 dd , 删除当前行向下的5行 5dd
  3) 在文件中查找某个单词 [命令行下 /关键字  ， 回车 查找 , 输入 n 就是查找下一个 ]
  4) 设置文件的行号，取消文件的行号.[命令行下 : set nu 和 :set nonu]
  5) 编辑 /etc/profile 文件，使用快捷键到底文档的最末行[G]和最首行[gg]
  6) 在一个文件中输入 "hello" ,然后又撤销这个动作 u
  7) 编辑 /etc/profile 文件，并将光标移动到 20行 shift+g 

  ​



##3. 关机&重启命令&用户登录和注销  

### 3.1 关机&重启命令 

- 基本介绍:

| 指令              | 作用                 |
| --------------- | ------------------ |
| shutdown –h now | 立该进行关机             |
| shudown  –h 1   | "hello, 1 分钟后会关机了" |
| shutdown –r now | 现在重新启动计算机          |
| halt            | 关机，作用和上面一样.        |
| reboot          | 现在重新启动计算机          |
| sync            | 把内存的数据同步到磁盘        |

- 注意细节:

**不管是重启系统还是关闭系统，首先要运行sync命令，把内存中的数据写到磁盘中** 

### 3.2 用户登录和注销 

- 基本介绍:

  1) 登录时尽量少用root帐号登录，因为它是系统管理员，最大的权限，避免操作失误。可
  以利用普通用户登录，登录后再用” su - 用户名’命令来切换成系统管理员身份.
  2) 在提示符下输入 logout 即可注销用户

- 使用细节:

  1) logout 注销指令在图形运行级别无效，在 运行级别 3下有效.
  2) 运行级别这个概念，后面给大家介绍 



## 4. 用户管理    

1. 基本介绍 

  Linux系统是一个多用户多任务的操作系统，任何一个要使用系统资源的用户，都必须首先向 系统管理员申请一个账号，然后以这个账号的身份进入系统。 

2. 添加用户 

- 基本语法 

  useradd  用户名 

- 应用案例 

  1)案例1:添加一个用户 xiaoming 

- 细节说明 

  1) 当创建用户成功后，会自动的创建和用户同名的家目录 

  2) 也可以通过 useradd -d 指定目录 新的用户名，给新创建的用户指定家目录

3. 指定/修改密码

- 基本语法 

  passwd 用户名 

- 应用案例 

  1) 给xiaoming 指定密码

4. 删除用户 

- 基本语法 

  userdel 用户名 

- 应用案例 

  1) 删除用户xiaoming，但是要保留家目录  userdel 【用户名】

  2) 删除用户以及用户主目录   userdel -r 【用户名】

- 细节说明

  1) 是否保留家目录的讨论    

  在删除用户时，一般会保留家目录，保存用户的工作数据。

5. 查询用户信息

- 基本语法

  id 用户名

6. 切换用户

- 介绍 

  在操作Linux中，如果当前用户的权限不够，可以通过 su - 指令，切换到高权限用户，比如root    

- 基本语法 

  su – 切换用户名 

  **扩展**：

  su 是切换到其他用户，但是不切换环境变量（比如说那些你用export命令查看一下，就知道两个命令的区别了）

  su - 是完整的切换到一个用户环境

- 细节说明 

  1) 从权限高的用户切换到权限低的用户，不需要输入密码，反之需要。 

  2) 当需要返回到原来用户时，使用exit指令 

7. 查看当前用户/登录用户 

- 基本语法

  whoami/ who am I

  

#5. 用户组

- 介绍 

  类似于角色，系统可以对有共性的多个用户进行统一的管理。 

1. 新增组

- 指令  

  groupadd 组名    

2. 删除组 

- 指令(基本语法) 

  groupdel 组名 

3. 增加用户时直接加上组 

- 指令(基本语法) 

  useradd –g  用户组 用户名

4. 修改用户的组 

- 指令(基本语法) 

  usermod –g 用户组 用户名    

5. 用户和组的相关文件 

   /etc/passwd 文件 

   用户（user）的配置文件，记录用户的各种信息 

   每行的含义： 用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录Shell

   ![etc-password解析](.\img\etc-password解析.png)

   /etc/shadow 文件 

   口令的配置文件 

   每行的含义： 登录名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:标志    

   /etc/group 文件 

   组(group)的配置文件，记录Linux包含的组的信息 

   每行含义： 组名:口令:组标识号:组内用户列表

   ![etc-group解析](.\img\etc-group解析.png)    





# 6. Linux实操篇 实用指令

## 6.1 运行级别

- 指定运行级别 

  基本介绍: 

  运行级别说明： 

  0 ：关机 

  1 ：单用户【找回丢失密码】 

  2：多用户状态没有网络服务 

  3：多用户状态有网络服务 

  4：系统未使用保留给用户 

  5：图形界面 

  6：系统重启 

  常用运行级别是3和5 ，要修改默认的运行级别可改文件 

  /etc/inittab的id:5:initdefault:这一行中的数字 

  命令： init [012356]    

- 运行级别的示意图：

![运行级别](img\运行级别.png)

- 面试题

  如何找回 root 密码，如果我们不小心，忘记 root  密码，怎么找回。

  思路： 进入到 单用户模式，然后修改 root 密码。因为进入单用户模式，root 不需要密码就可以登录。

  开机->在引导时输入 回车键-> 看到一个界面输入 e -->  看到一个新的界面，选中第二行（编辑内核）在输入  e -->  在这行最后输入1 ,再输入 回车键 -->再次输入 b ,这时就会进入到单用户模式。

  这时，我们就进入到单用户模式，使用 passwd  指令来修改 root  密码。



## 6.2 帮助指令

- 介绍

  当我们对某个指令不熟悉时，我们可以使用 Linux 提供的帮助指令来了解这个指令的使用方法。

- man 获得帮助信息

1. 基本语法

   man [命令或配置文件]（功能描述：获得帮助信息）

- help 指令

1. 基本语法

   help 命令 （功能描述：获得 shell 内置命令的帮助信息） 

   

## 6.3 文件目录类

- pwd 指令

1. 基本语法

   pwd      (功能描述：显示当前工作目录的绝对路径)

------

- ls 指令

1. 基本语法

   ls  [选 项]

2. 常用选项

   -a ：显示当前目录所有的文件和目录，包括隐藏的、

------

- cd 指令

1. 基本语法

   cd    [参数] (功能描述：切换到指定目录)

2. 常用参数

   cd ~ 或者 cd ：回到自己的家目录

   cd .. 回到当前目录的上一级目录

------

- mkdir 指令

  mkdir 指令用于创建目录(make directory)

1. 基本语法

   mkdir    [选项]    要创建的目录

2. 常用选项

   -p ：创建多级目录 (不加-p 创建多级目录时，必须存在父目录，否则不能创建)

------

- rmdir 指令

  rmdir 指令删除空目录

1. 基本语法

   rmdir    [选项]    要删除的空目录

2. 使用细节

   rmdir 删除的是空目录，如果目录下有内容时无法删除的。

   如果需要删除非空目录，需要使用 rm -rf 要删除的目录。

------

- touch 指令

  touch 指令创建空文件

1. 基本语法

   touch 文件名称(可以一次创建多个文件)

------

- cp 指令[重要]

  cp 指令拷贝文件到指定目录

1. 基本语法

   cp [选项] source dest

   \cp [选项] source dest  （相同文件强制覆盖，不询问）

2. 常用选项

   -r ：递归复制整个文件夹

------

- rm 指令

  rm 指令移除【删除】文件或目录

1. 基本语法

   rm    [选项]    要删除的文件或目录

2. 常用选项

   -r ：递归删除整个文件夹

   -f ： 强制删除不提示

------

- mv 指令

  mv 移动文件与目录或重命名

1. 基本语法

   mv oldNameFile newNameFile   (功能描述：重命名) 

   mv /temp/movefile /targetFolder (功能描述：移动文件)

------
- cat 指令

  cat 查看文件内容，是以只读的方式打开。

1. 基本语法

   cat    [选项] 要查看的文件

2. 常用选项

   -n ：显示行号

3. 使用细节

   cat 只能浏览文件，而不能修改文件，为了浏览方便，一般会带上                                                                                   管道命令 | more

   cat 文件名 | more [分页浏览]

4. 快捷键

![more快捷键](img\more快捷键.png)



------

- less 指令

  用来分屏查看文件内容，它的功能与 more 指令类似，但是比 more 指令更加强大，支持各种显示终端。less 指令在显示文件内容时，并不是一次将整个文件加载之后才显示，而是根据显示需要加载内容，对于显示大型文件具有较高的效率。

1. 基本语法

   less 要查看的文件

2. 快捷键

![less快捷键](img\less快捷键.png)

------

- \> 指令 和 >>  指令

1. 介绍

   \> 指 令 和 >> 指 令
   \> 输出重定向 : 会将原来的文件的内容覆盖

   \> > 追加： 不会覆盖原来文件的内容，而是追加到文件的尾部。

2. 基本语法

   1) ls -l > 文件（功能描述：列表的内容写入文件 a.txt 中（覆盖写））

   2)  ls -al >>文件 （功能描述：列表的内容追加到文件 aa.txt 的末尾）

   3)  cat 文件 1 > 文件 2 （功能描述：将文件 1 的内容覆盖到文件 2）  

------

- echo 指令

  echo 输出内容到控制台。

1. 基本语法

   echo [选项]  \[输出内容]

2. 应用实例

   案例: 使用 echo 指令输出环境变量,输出当前的环境路径。

   echo $PATH